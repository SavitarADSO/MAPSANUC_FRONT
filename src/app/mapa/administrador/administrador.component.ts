import { Component, AfterViewInit, ElementRef } from '@angular/core';
import { CommonModule } from '@angular/common';
import { FormsModule } from '@angular/forms';
import { UbicacionService } from '../../services/ubicacion.service';
import { Ubicacion } from '../../models/ubicacion.model';
import { HttpClientModule } from '@angular/common/http';
import { Map, Icon, tileLayer, marker, polygon, LatLngExpression } from 'leaflet';

@Component({
  selector: 'app-administrador',
  standalone: true,
  imports: [CommonModule, HttpClientModule, FormsModule],
  templateUrl: './administrador.component.html',
  styleUrls: ['./administrador.component.css'],
  providers: [UbicacionService]
})
export class AdministradorComponent implements AfterViewInit {
  private map: Map | undefined;
  private markers: any[] = [];
  public veredas: string[] = [];
  public tiposFinca: string[] = [];
  public categorias: string[] = [];
  public productos: string[] = [];
  public hectareas: number[] = [];
  public selectedVereda: string = '';
  public selectedTipoFinca: string = '';
  public selectedCategoria: string = '';
  public selectedProducto: string = '';
  public selectedHectarea: number | null = null;

  constructor(private elementRef: ElementRef, private ubicacionService: UbicacionService) { }

  ngAfterViewInit(): void {
    this.initializeMap().then(() => {
      this.loadUbicaciones();
      this.addVeredas(); // Agrega los polígonos de las veredas
    });
  }

  private initializeMap(): Promise<void> {
    return new Promise<void>((resolve, reject) => {
      this.map = new Map('map').setView([7.06260, -73.08583], 13);
      tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 19,
      }).addTo(this.map);

      const anucIcon = new Icon({
        iconUrl: 'assets/img/mi_finca.png',
        iconSize: [38, 38],
        iconAnchor: [19, 38],
        popupAnchor: [0, -38]
      });

      marker([7.062166379405107, -73.08538016671284], { icon: anucIcon })
        .addTo(this.map!)
        .bindPopup(`
          <div style="text-align: center;">
            <div style="display: flex; align-items: center; justify-content: center; margin-bottom: 10px;">
              <img src="assets/img/logo_anuc.png" alt="Logo ANUC" style="width: 100px; height: auto; margin-right: 10px;">
              <h3 style="margin: 0;">ASOCIACIÓN MUNICIPAL DE USUARIOS CAMPESINOS DE FLORIDABLANCA ANUC</h3>
            </div>
            <p><strong>Dirección:</strong> CR 9 6 16 CASCO URBANO FLORIDABLANCA</p>
            <p><strong>Horarios de venta:</strong></p>
            <ul style="list-style: none; padding: 0;">
              <li>Martes: 8:00 am - 4:00 pm</li>
              <li>Jueves: 8:00 am - 4:00 pm</li>
              <li>Sábado: 8:00 am - 4:00 pm</li>
              <li>Domingo: 8:00 am - 4:00 pm</li>
            </ul>
            <img src="assets/img/fachada_anuc.PNG" alt="Fachada ANUC" style="width: 200px; height: auto; margin-top: 10px;">
          </div>
        `);

      this.map.whenReady(() => {
        resolve();
      });
    });
  }

  private loadUbicaciones(): void {
    const fincaIcon = new Icon({
      iconUrl: 'assets/img/fincasots.png',
      iconSize: [38, 38],
      iconAnchor: [19, 38],
      popupAnchor: [0, -38]
    });

    this.ubicacionService.getUbicaciones().subscribe((ubicaciones: Ubicacion[]) => {
      const fincas = ubicaciones.slice(0, 10);

      fincas.forEach((ubicacion: Ubicacion) => {
        if (ubicacion.latitude && ubicacion.longitude) {
          const lat = parseFloat(ubicacion.latitude);
          const lng = parseFloat(ubicacion.longitude);

          const markerItem = marker([lat, lng], { icon: fincaIcon })
            .bindPopup(`
              <div>
                <p><strong>Finca:</strong> ${ubicacion.nombre_finca}</p>
                <p><strong>Vereda:</strong> ${ubicacion.vereda}</p>
                <p><strong>Nombre:</strong> ${ubicacion.nombre}</p>
                <p><strong>Tipo de Finca:</strong> ${ubicacion.tipo_finca}</p>
                <p><strong>Hectáreas:</strong> ${ubicacion.hectareas}</p>
                <p><strong>Producción:</strong></p>
                <ul>
                  ${ubicacion.producciones?.map(prod => `<li>${prod.categorias}: ${prod.productos}</li>`).join('')}
                </ul>
              </div>
            `)
            .addTo(this.map!);

          this.markers.push({
            marker: markerItem,
            vereda: ubicacion.vereda,
            tipoFinca: ubicacion.tipo_finca,
            categoria: ubicacion.producciones?.map(prod => prod.categorias).join(', ') || '',
            producto: ubicacion.producciones?.map(prod => prod.productos).join(', ') || '',
            hectareas: ubicacion.hectareas || 0
          });

          if (ubicacion.vereda && !this.veredas.includes(ubicacion.vereda)) {
            this.veredas.push(ubicacion.vereda);
          }
          if (ubicacion.tipo_finca && !this.tiposFinca.includes(ubicacion.tipo_finca)) {
            this.tiposFinca.push(ubicacion.tipo_finca);
          }
          ubicacion.producciones?.forEach(prod => {
            if (prod.categorias && !this.categorias.includes(prod.categorias)) {
              this.categorias.push(prod.categorias);
            }
            if (prod.productos && !this.productos.includes(prod.productos)) {
              this.productos.push(prod.productos);
            }
          });
          if (ubicacion.hectareas && !this.hectareas.includes(ubicacion.hectareas)) {
            this.hectareas.push(ubicacion.hectareas);
          }
        }
      });
    });
  }

  public filterMarkers(): void {
    this.markers.forEach(item => {
      const showByVereda = this.selectedVereda === '' || item.vereda === this.selectedVereda;
      const showByTipoFinca = this.selectedTipoFinca === '' || item.tipoFinca === this.selectedTipoFinca;
      const showByCategoria = this.selectedCategoria === '' || item.categoria.includes(this.selectedCategoria);
      const showByProducto = this.selectedProducto === '' || item.producto.includes(this.selectedProducto);
      const showByHectareas = this.selectedHectarea === null || item.hectareas === this.selectedHectarea;

      if (showByVereda && showByTipoFinca && showByCategoria && showByProducto && showByHectareas) {
        item.marker.addTo(this.map!);
      } else {
        this.map!.removeLayer(item.marker);
      }
    });
  }

  private addVeredas(): void {
    const veredas = [
      {
        name: "Floridablanca ",
        coordinates: [
          [
            -73.0025543,
            7.1018692
          ],
          [
            -73.0025465,
            7.1019254
          ],
          [
            -73.0023857,
            7.1022338
          ],
          [
            -73.0021278,
            7.1026074
          ],
          [
            -73.0018055,
            7.1031109
          ],
          [
            -73.0017186,
            7.1035707
          ],
          [
            -73.0018175,
            7.1039806
          ],
          [
            -73.0020465,
            7.1043472
          ],
          [
            -73.0022872,
            7.1047038
          ],
          [
            -73.0025358,
            7.1050557
          ],
          [
            -73.0026614,
            7.1054596
          ],
          [
            -73.0026692,
            7.1058911
          ],
          [
            -73.0025624,
            7.1063021
          ],
          [
            -73.002413,
            7.1067055
          ],
          [
            -73.002396,
            7.1071341
          ],
          [
            -73.0024133,
            7.1075651
          ],
          [
            -73.0026189,
            7.107937
          ],
          [
            -73.0028707,
            7.1082845
          ],
          [
            -73.0030131,
            7.1086907
          ],
          [
            -73.0030294,
            7.1091187
          ],
          [
            -73.003088,
            7.1095423
          ],
          [
            -73.0033114,
            7.109907
          ],
          [
            -73.0035705,
            7.1102503
          ],
          [
            -73.0038151,
            7.1103064
          ],
          [
            -73.0040312,
            7.1111843
          ],
          [
            -73.0042403,
            7.1120639
          ],
          [
            -73.0044539,
            7.1129425
          ],
          [
            -73.0046833,
            7.113817
          ],
          [
            -73.0049382,
            7.1146845
          ],
          [
            -73.005209,
            7.1155471
          ],
          [
            -73.0054943,
            7.1164052
          ],
          [
            -73.0058216,
            7.117248
          ],
          [
            -73.00619,
            7.1180047
          ],
          [
            -73.0064787,
            7.1184272
          ],
          [
            -73.0067415,
            7.1187955
          ],
          [
            -73.0074,
            7.1194162
          ],
          [
            -73.0081258,
            7.1199571
          ],
          [
            -73.0090054,
            7.1201659
          ],
          [
            -73.0099027,
            7.1202854
          ],
          [
            -73.0108035,
            7.1203752
          ],
          [
            -73.011708,
            7.1204025
          ],
          [
            -73.0126109,
            7.1203495
          ],
          [
            -73.0135028,
            7.1204885
          ],
          [
            -73.0143673,
            7.1207596
          ],
          [
            -73.0152245,
            7.1210497
          ],
          [
            -73.0160736,
            7.1213628
          ],
          [
            -73.016915,
            7.1216961
          ],
          [
            -73.0177621,
            7.1220286
          ],
          [
            -73.0185062,
            7.1225741
          ],
          [
            -73.0188548,
            7.1233766
          ],
          [
            -73.018935,
            7.1237448
          ],
          [
            -73.0190457,
            7.1242535
          ],
          [
            -73.0191961,
            7.1251518
          ],
          [
            -73.0193408,
            7.1260549
          ],
          [
            -73.0195144,
            7.1269462
          ],
          [
            -73.0198818,
            7.1277694
          ],
          [
            -73.0200967,
            7.1286387
          ],
          [
            -73.0199653,
            7.129536
          ],
          [
            -73.0198072,
            7.1304276
          ],
          [
            -73.0198715,
            7.1313267
          ],
          [
            -73.0201319,
            7.1321925
          ],
          [
            -73.0204615,
            7.1330359
          ],
          [
            -73.0208826,
            7.1338465
          ],
          [
            -73.0215341,
            7.1344212
          ],
          [
            -73.0223412,
            7.1348406
          ],
          [
            -73.0230591,
            7.1353918
          ],
          [
            -73.0234248,
            7.1361944
          ],
          [
            -73.0232492,
            7.1370898
          ],
          [
            -73.0231088,
            7.137983
          ],
          [
            -73.0231434,
            7.1381545
          ],
          [
            -73.0232383,
            7.1386253
          ],
          [
            -73.0232781,
            7.1388225
          ],
          [
            -73.0232989,
            7.1388953
          ],
          [
            -73.0236264,
            7.1397036
          ],
          [
            -73.024046,
            7.1405288
          ],
          [
            -73.0247878,
            7.1408294
          ],
          [
            -73.0249436,
            7.1407922
          ],
          [
            -73.0250028,
            7.1407784
          ],
          [
            -73.0259014,
            7.1414852
          ],
          [
            -73.0258184,
            7.1424417
          ],
          [
            -73.0262575,
            7.1433959
          ],
          [
            -73.0280053,
            7.1451269
          ],
          [
            -73.0293994,
            7.1455556
          ],
          [
            -73.0309724,
            7.1471134
          ],
          [
            -73.0324547,
            7.1478025
          ],
          [
            -73.0334141,
            7.1483199
          ],
          [
            -73.0343702,
            7.1480551
          ],
          [
            -73.0348897,
            7.1474445
          ],
          [
            -73.0358444,
            7.146832
          ],
          [
            -73.0370552,
            7.1450885
          ],
          [
            -73.0385282,
            7.1436047
          ],
          [
            -73.0394802,
            7.1423838
          ],
          [
            -73.0406948,
            7.1415094
          ],
          [
            -73.0416494,
            7.1408969
          ],
          [
            -73.0426025,
            7.1399368
          ],
          [
            -73.0437267,
            7.1382806
          ],
          [
            -73.045116,
            7.1375793
          ],
          [
            -73.0463305,
            7.136705
          ],
          [
            -73.047198,
            7.1360929
          ],
          [
            -73.0479782,
            7.1353942
          ],
          [
            -73.049366,
            7.1343453
          ],
          [
            -73.0504965,
            7.1341666
          ],
          [
            -73.0512792,
            7.1340764
          ],
          [
            -73.0517987,
            7.1334657
          ],
          [
            -73.0522297,
            7.1325078
          ],
          [
            -73.0523996,
            7.131551
          ],
          [
            -73.0525685,
            7.1303334
          ],
          [
            -73.0529979,
            7.1290279
          ],
          [
            -73.0529931,
            7.127898
          ],
          [
            -73.0539488,
            7.1275462
          ],
          [
            -73.054904,
            7.1271075
          ],
          [
            -73.0554243,
            7.1266707
          ],
          [
            -73.0568113,
            7.125448
          ],
          [
            -73.0578517,
            7.1245743
          ],
          [
            -73.0590665,
            7.1237869
          ],
          [
            -73.0593231,
            7.1227428
          ],
          [
            -73.0593134,
            7.120483
          ],
          [
            -73.0598288,
            7.1189163
          ],
          [
            -73.0604334,
            7.1178707
          ],
          [
            -73.0605977,
            7.1156102
          ],
          [
            -73.0605943,
            7.114828
          ],
          [
            -73.0611153,
            7.114565
          ],
          [
            -73.0621613,
            7.1149951
          ],
          [
            -73.0634661,
            7.1149026
          ],
          [
            -73.0641588,
            7.1141174
          ],
          [
            -73.0649415,
            7.1140271
          ],
          [
            -73.065899,
            7.1141099
          ],
          [
            -73.0665985,
            7.1148891
          ],
          [
            -73.0672987,
            7.1158422
          ],
          [
            -73.068174,
            7.1170553
          ],
          [
            -73.0687895,
            7.1185302
          ],
          [
            -73.068794,
            7.1195732
          ],
          [
            -73.0691488,
            7.1211361
          ],
          [
            -73.0701104,
            7.1221749
          ],
          [
            -73.0714156,
            7.1221693
          ],
          [
            -73.0728037,
            7.1212073
          ],
          [
            -73.0731495,
            7.1206843
          ],
          [
            -73.0739296,
            7.1199856
          ],
          [
            -73.0748867,
            7.1199815
          ],
          [
            -73.0756706,
            7.1201519
          ],
          [
            -73.0762815,
            7.1205838
          ],
          [
            -73.0765736,
            7.1207775
          ],
          [
            -73.0773287,
            7.1212746
          ],
          [
            -73.0780259,
            7.1215324
          ],
          [
            -73.0788938,
            7.1210071
          ],
          [
            -73.0791507,
            7.1200499
          ],
          [
            -73.0799296,
            7.1190905
          ],
          [
            -73.0804472,
            7.1180453
          ],
          [
            -73.0804351,
            7.115264
          ],
          [
            -73.0809744,
            7.1142805
          ],
          [
            -73.0813843,
            7.1134347
          ],
          [
            -73.0819014,
            7.1123026
          ],
          [
            -73.0825938,
            7.1114304
          ],
          [
            -73.0825884,
            7.1098944
          ],
          [
            -73.0825843,
            7.1092576
          ],
          [
            -73.0831828,
            7.1068214
          ],
          [
            -73.0837874,
            7.1057758
          ],
          [
            -73.0850895,
            7.1050748
          ],
          [
            -73.0862161,
            7.104027
          ],
          [
            -73.0872594,
            7.1038486
          ],
          [
            -73.0878647,
            7.1029769
          ],
          [
            -73.088604,
            7.1020828
          ],
          [
            -73.0916248,
            7.0988398
          ],
          [
            -73.0918593,
            7.0992368
          ],
          [
            -73.0923301,
            7.0991043
          ],
          [
            -73.0923218,
            7.098808
          ],
          [
            -73.0925662,
            7.0987392
          ],
          [
            -73.092926,
            7.0981646
          ],
          [
            -73.0934245,
            7.0979728
          ],
          [
            -73.0938261,
            7.0980426
          ],
          [
            -73.0940759,
            7.0981142
          ],
          [
            -73.0944153,
            7.0981289
          ],
          [
            -73.0946608,
            7.0980691
          ],
          [
            -73.0949314,
            7.0979398
          ],
          [
            -73.095479,
            7.0978123
          ],
          [
            -73.0957271,
            7.0977221
          ],
          [
            -73.096434,
            7.0974491
          ],
          [
            -73.0965129,
            7.0973075
          ],
          [
            -73.0966467,
            7.0971945
          ],
          [
            -73.0980918,
            7.097294
          ],
          [
            -73.0982752,
            7.0973343
          ],
          [
            -73.0986966,
            7.0974972
          ],
          [
            -73.0989574,
            7.0975491
          ],
          [
            -73.0997991,
            7.0968019
          ],
          [
            -73.1001995,
            7.0966081
          ],
          [
            -73.100571,
            7.0966997
          ],
          [
            -73.1009218,
            7.0968389
          ],
          [
            -73.1012892,
            7.0967918
          ],
          [
            -73.1016044,
            7.0966262
          ],
          [
            -73.1013848,
            7.0958512
          ],
          [
            -73.1013394,
            7.0956794
          ],
          [
            -73.1013079,
            7.0955013
          ],
          [
            -73.1012749,
            7.0953063
          ],
          [
            -73.1031163,
            7.0945592
          ],
          [
            -73.1044177,
            7.0940371
          ],
          [
            -73.1049668,
            7.0937614
          ],
          [
            -73.1054988,
            7.0949583
          ],
          [
            -73.1059383,
            7.0960694
          ],
          [
            -73.1061968,
            7.0959598
          ],
          [
            -73.106488,
            7.0958194
          ],
          [
            -73.1067363,
            7.0956815
          ],
          [
            -73.1068973,
            7.0956269
          ],
          [
            -73.1071099,
            7.095544
          ],
          [
            -73.1065567,
            7.0945279
          ],
          [
            -73.1060561,
            7.0936861
          ],
          [
            -73.1057639,
            7.0930314
          ],
          [
            -73.1056795,
            7.0920572
          ],
          [
            -73.1055682,
            7.0915435
          ],
          [
            -73.1052229,
            7.0908004
          ],
          [
            -73.1049178,
            7.090175
          ],
          [
            -73.1056573,
            7.0899626
          ],
          [
            -73.1057252,
            7.0900797
          ],
          [
            -73.1064162,
            7.0898427
          ],
          [
            -73.1063736,
            7.0896496
          ],
          [
            -73.1069994,
            7.0884889
          ],
          [
            -73.1072853,
            7.0877812
          ],
          [
            -73.1079048,
            7.0872646
          ],
          [
            -73.1079812,
            7.0872009
          ],
          [
            -73.1081977,
            7.0868291
          ],
          [
            -73.1083882,
            7.0864421
          ],
          [
            -73.1085818,
            7.0860575
          ],
          [
            -73.1088198,
            7.0857022
          ],
          [
            -73.1091072,
            7.0853796
          ],
          [
            -73.1093928,
            7.0850553
          ],
          [
            -73.1095955,
            7.0846777
          ],
          [
            -73.1097701,
            7.0842818
          ],
          [
            -73.1099124,
            7.0838757
          ],
          [
            -73.1100051,
            7.0834567
          ],
          [
            -73.1100704,
            7.0830293
          ],
          [
            -73.1101946,
            7.0826235
          ],
          [
            -73.1104029,
            7.0822455
          ],
          [
            -73.1106148,
            7.0818702
          ],
          [
            -73.1108551,
            7.0815155
          ],
          [
            -73.1111365,
            7.0811908
          ],
          [
            -73.1115565,
            7.0807453
          ],
          [
            -73.1117484,
            7.0803601
          ],
          [
            -73.1121313,
            7.0795892
          ],
          [
            -73.112323,
            7.0792039
          ],
          [
            -73.1125151,
            7.0788188
          ],
          [
            -73.112708,
            7.0784342
          ],
          [
            -73.1129027,
            7.07805
          ],
          [
            -73.113189,
            7.077731
          ],
          [
            -73.1134946,
            7.0774282
          ],
          [
            -73.1141106,
            7.0768263
          ],
          [
            -73.1144134,
            7.0765203
          ],
          [
            -73.1147473,
            7.0762556
          ],
          [
            -73.1151371,
            7.0760735
          ],
          [
            -73.1154616,
            7.0757882
          ],
          [
            -73.1157419,
            7.075465
          ],
          [
            -73.1159244,
            7.0750722
          ],
          [
            -73.1161844,
            7.0747345
          ],
          [
            -73.1165005,
            7.0744389
          ],
          [
            -73.1168815,
            7.0742417
          ],
          [
            -73.1172265,
            7.0739956
          ],
          [
            -73.1175788,
            7.0737604
          ],
          [
            -73.1179869,
            7.0736246
          ],
          [
            -73.1183903,
            7.0732378
          ],
          [
            -73.1188487,
            7.0728571
          ],
          [
            -73.1192317,
            7.0726372
          ],
          [
            -73.1195945,
            7.0722699
          ],
          [
            -73.1199216,
            7.0719742
          ],
          [
            -73.1200352,
            7.0719393
          ],
          [
            -73.1201399,
            7.0718862
          ],
          [
            -73.1202605,
            7.0717646
          ],
          [
            -73.1203977,
            7.0716248
          ],
          [
            -73.1205566,
            7.0715183
          ],
          [
            -73.1207948,
            7.0713258
          ],
          [
            -73.12115,
            7.0711306
          ],
          [
            -73.1214018,
            7.0710203
          ],
          [
            -73.1216231,
            7.0709025
          ],
          [
            -73.1221859,
            7.0706765
          ],
          [
            -73.1228319,
            7.070504
          ],
          [
            -73.1231822,
            7.070357
          ],
          [
            -73.1239069,
            7.0704033
          ],
          [
            -73.1242149,
            7.0705687
          ],
          [
            -73.1242718,
            7.0693063
          ],
          [
            -73.1243025,
            7.0688891
          ],
          [
            -73.1243316,
            7.0684595
          ],
          [
            -73.1243629,
            7.0680127
          ],
          [
            -73.1243351,
            7.0675875
          ],
          [
            -73.1241149,
            7.0672467
          ],
          [
            -73.1234777,
            7.0666816
          ],
          [
            -73.1237762,
            7.0663706
          ],
          [
            -73.1240982,
            7.0660891
          ],
          [
            -73.1244538,
            7.0658653
          ],
          [
            -73.1247407,
            7.0655441
          ],
          [
            -73.1250198,
            7.0652179
          ],
          [
            -73.1252936,
            7.0648872
          ],
          [
            -73.1256,
            7.0645847
          ],
          [
            -73.1259032,
            7.064279
          ],
          [
            -73.1260018,
            7.0641995
          ],
          [
            -73.1262372,
            7.0640095
          ],
          [
            -73.126654,
            7.06392
          ],
          [
            -73.1270848,
            7.063924
          ],
          [
            -73.1278263,
            7.063447
          ],
          [
            -73.1282321,
            7.0631354
          ],
          [
            -73.1284924,
            7.062574
          ],
          [
            -73.1289212,
            7.0620307
          ],
          [
            -73.129301,
            7.0619601
          ],
          [
            -73.1296539,
            7.0620196
          ],
          [
            -73.1297937,
            7.0619206
          ],
          [
            -73.1300035,
            7.061733
          ],
          [
            -73.1302544,
            7.0614204
          ],
          [
            -73.1306832,
            7.0614516
          ],
          [
            -73.1311085,
            7.061489
          ],
          [
            -73.1315071,
            7.0616546
          ],
          [
            -73.1319025,
            7.0618252
          ],
          [
            -73.1323213,
            7.0619172
          ],
          [
            -73.1327006,
            7.0621183
          ],
          [
            -73.1331052,
            7.0622628
          ],
          [
            -73.13352,
            7.0623428
          ],
          [
            -73.1339506,
            7.0623443
          ],
          [
            -73.1343754,
            7.0622902
          ],
          [
            -73.1346817,
            7.0619937
          ],
          [
            -73.1351018,
            7.0617327
          ],
          [
            -73.1348514,
            7.0613759
          ],
          [
            -73.1346823,
            7.0609807
          ],
          [
            -73.1345677,
            7.0605661
          ],
          [
            -73.1344854,
            7.0601437
          ],
          [
            -73.1343509,
            7.0592936
          ],
          [
            -73.1342695,
            7.058871
          ],
          [
            -73.1341588,
            7.0584553
          ],
          [
            -73.1340023,
            7.0580546
          ],
          [
            -73.1338256,
            7.0576623
          ],
          [
            -73.1336377,
            7.0572752
          ],
          [
            -73.1334103,
            7.0569103
          ],
          [
            -73.1331286,
            7.0565853
          ],
          [
            -73.1328111,
            7.0562951
          ],
          [
            -73.1321132,
            7.0557987
          ],
          [
            -73.131734,
            7.0555954
          ],
          [
            -73.131344,
            7.0554135
          ],
          [
            -73.1309428,
            7.0552585
          ],
          [
            -73.1305261,
            7.0551517
          ],
          [
            -73.1303636,
            7.0546625
          ],
          [
            -73.130227,
            7.0542544
          ],
          [
            -73.1300958,
            7.0538445
          ],
          [
            -73.1299742,
            7.0534317
          ],
          [
            -73.1297837,
            7.0530498
          ],
          [
            -73.1294505,
            7.0527739
          ],
          [
            -73.1293775,
            7.0524109
          ],
          [
            -73.1295949,
            7.0520399
          ],
          [
            -73.129735,
            7.0516332
          ],
          [
            -73.1298692,
            7.0512242
          ],
          [
            -73.1294254,
            7.0507871
          ],
          [
            -73.1292428,
            7.0504088
          ],
          [
            -73.1290703,
            7.0500155
          ],
          [
            -73.1288436,
            7.0496491
          ],
          [
            -73.128686,
            7.0492491
          ],
          [
            -73.1284446,
            7.0488959
          ],
          [
            -73.1282127,
            7.0485337
          ],
          [
            -73.1279016,
            7.0482382
          ],
          [
            -73.1275518,
            7.0479891
          ],
          [
            -73.1271369,
            7.0478745
          ],
          [
            -73.1267209,
            7.0477655
          ],
          [
            -73.1262977,
            7.0476998
          ],
          [
            -73.1258726,
            7.047646
          ],
          [
            -73.1254508,
            7.0475587
          ],
          [
            -73.1250371,
            7.0476228
          ],
          [
            -73.1244003,
            7.046912
          ],
          [
            -73.1238523,
            7.0463693
          ],
          [
            -73.1225992,
            7.0449733
          ],
          [
            -73.1223599,
            7.0437286
          ],
          [
            -73.1220417,
            7.0422506
          ],
          [
            -73.1220281,
            7.0391362
          ],
          [
            -73.1221047,
            7.0387448
          ],
          [
            -73.1222568,
            7.0379673
          ],
          [
            -73.1227965,
            7.0366413
          ],
          [
            -73.1232607,
            7.0358606
          ],
          [
            -73.124036,
            7.0349229
          ],
          [
            -73.1250429,
            7.033517
          ],
          [
            -73.1258182,
            7.0325793
          ],
          [
            -73.1264386,
            7.0318758
          ],
          [
            -73.1274483,
            7.0310927
          ],
          [
            -73.1281469,
            7.0304668
          ],
          [
            -73.1288453,
            7.029763
          ],
          [
            -73.1296974,
            7.0285913
          ],
          [
            -73.1304747,
            7.0281208
          ],
          [
            -73.131095,
            7.0274173
          ],
          [
            -73.1315585,
            7.0264809
          ],
          [
            -73.1321323,
            7.025813
          ],
          [
            -73.1317773,
            7.0251648
          ],
          [
            -73.1314744,
            7.0248587
          ],
          [
            -73.1311314,
            7.0246028
          ],
          [
            -73.13074,
            7.0244244
          ],
          [
            -73.130334,
            7.0242821
          ],
          [
            -73.1299242,
            7.0241507
          ],
          [
            -73.1296465,
            7.024427
          ],
          [
            -73.1292798,
            7.0247954
          ],
          [
            -73.1289204,
            7.024971
          ],
          [
            -73.1284901,
            7.0249308
          ],
          [
            -73.1281413,
            7.0251287
          ],
          [
            -73.1279851,
            7.02553
          ],
          [
            -73.127691,
            7.0258441
          ],
          [
            -73.1273669,
            7.0261254
          ],
          [
            -73.1269774,
            7.0263112
          ],
          [
            -73.1265852,
            7.0264886
          ],
          [
            -73.1262296,
            7.026723
          ],
          [
            -73.1258895,
            7.0269703
          ],
          [
            -73.125475,
            7.0270872
          ],
          [
            -73.1250968,
            7.0272766
          ],
          [
            -73.1248038,
            7.0275932
          ],
          [
            -73.1244994,
            7.0278974
          ],
          [
            -73.12443,
            7.0279664
          ],
          [
            -73.1241942,
            7.0282008
          ],
          [
            -73.1235829,
            7.0288066
          ],
          [
            -73.1229571,
            7.029428
          ],
          [
            -73.1228116,
            7.0295721
          ],
          [
            -73.1221401,
            7.0291071
          ],
          [
            -73.1218226,
            7.0277849
          ],
          [
            -73.1213485,
            7.0263076
          ],
          [
            -73.120561,
            7.0244423
          ],
          [
            -73.1200077,
            7.0226539
          ],
          [
            -73.119455,
            7.0210212
          ],
          [
            -73.1186699,
            7.019701
          ],
          [
            -73.1183278,
            7.0188314
          ],
          [
            -73.1180298,
            7.0189183
          ],
          [
            -73.1176154,
            7.0190385
          ],
          [
            -73.1171999,
            7.0191533
          ],
          [
            -73.1167693,
            7.0192254
          ],
          [
            -73.116349,
            7.0191791
          ],
          [
            -73.1160298,
            7.0188958
          ],
          [
            -73.115699,
            7.0186127
          ],
          [
            -73.1153255,
            7.0183982
          ],
          [
            -73.114954,
            7.0181802
          ],
          [
            -73.1145974,
            7.0179344
          ],
          [
            -73.1142427,
            7.017683
          ],
          [
            -73.1138763,
            7.0174649
          ],
          [
            -73.1134629,
            7.0173804
          ],
          [
            -73.1130284,
            7.0173557
          ],
          [
            -73.1126001,
            7.0173032
          ],
          [
            -73.1121717,
            7.0172509
          ],
          [
            -73.1117432,
            7.0172445
          ],
          [
            -73.1113076,
            7.0172606
          ],
          [
            -73.1108731,
            7.0172988
          ],
          [
            -73.1104527,
            7.0173798
          ],
          [
            -73.1100531,
            7.0175229
          ],
          [
            -73.1096661,
            7.0177295
          ],
          [
            -73.1093112,
            7.0179867
          ],
          [
            -73.1090107,
            7.0182846
          ],
          [
            -73.108775,
            7.0186397
          ],
          [
            -73.1085726,
            7.0190275
          ],
          [
            -73.1083659,
            7.0194109
          ],
          [
            -73.1077087,
            7.0194068
          ],
          [
            -73.1073209,
            7.0196029
          ],
          [
            -73.1069189,
            7.019751
          ],
          [
            -73.1065005,
            7.0198514
          ],
          [
            -73.1060802,
            7.0199462
          ],
          [
            -73.1056604,
            7.0200434
          ],
          [
            -73.1053752,
            7.020359
          ],
          [
            -73.1051041,
            7.0206988
          ],
          [
            -73.1048192,
            7.021024
          ],
          [
            -73.1045265,
            7.0213442
          ],
          [
            -73.1042028,
            7.0216207
          ],
          [
            -73.1038126,
            7.0218021
          ],
          [
            -73.1034166,
            7.0219773
          ],
          [
            -73.102993,
            7.0220463
          ],
          [
            -73.1021388,
            7.02216
          ],
          [
            -73.1018384,
            7.0221801
          ],
          [
            -73.1014134,
            7.0222426
          ],
          [
            -73.1010088,
            7.0223455
          ],
          [
            -73.1005238,
            7.0225702
          ],
          [
            -73.1000184,
            7.0227747
          ],
          [
            -73.0994726,
            7.0229996
          ],
          [
            -73.0990887,
            7.0231833
          ],
          [
            -73.0983812,
            7.0234898
          ],
          [
            -73.0977556,
            7.0239781
          ],
          [
            -73.0974362,
            7.02434
          ],
          [
            -73.0975398,
            7.025089
          ],
          [
            -73.0976023,
            7.0256314
          ],
          [
            -73.0976034,
            7.0262538
          ],
          [
            -73.0975246,
            7.0266534
          ],
          [
            -73.0971248,
            7.0273618
          ],
          [
            -73.0968278,
            7.027793
          ],
          [
            -73.0963017,
            7.028287
          ],
          [
            -73.0959522,
            7.0285466
          ],
          [
            -73.0955212,
            7.0288162
          ],
          [
            -73.0953609,
            7.0289788
          ],
          [
            -73.095016,
            7.029322
          ],
          [
            -73.0946538,
            7.0296727
          ],
          [
            -73.0944883,
            7.0299864
          ],
          [
            -73.0942033,
            7.0306722
          ],
          [
            -73.0940498,
            7.0311044
          ],
          [
            -73.0937489,
            7.0317604
          ],
          [
            -73.0934895,
            7.0323354
          ],
          [
            -73.0931985,
            7.0327165
          ],
          [
            -73.0929326,
            7.033031
          ],
          [
            -73.092538,
            7.0334304
          ],
          [
            -73.0922405,
            7.0337342
          ],
          [
            -73.0918878,
            7.0340863
          ],
          [
            -73.0918732,
            7.0340974
          ],
          [
            -73.0915936,
            7.0338834
          ],
          [
            -73.0912489,
            7.033621
          ],
          [
            -73.0909783,
            7.0333093
          ],
          [
            -73.0908523,
            7.0328974
          ],
          [
            -73.0905571,
            7.0325821
          ],
          [
            -73.0902872,
            7.0322464
          ],
          [
            -73.090049,
            7.0318879
          ],
          [
            -73.0898142,
            7.0315267
          ],
          [
            -73.0894516,
            7.0313861
          ],
          [
            -73.0892768,
            7.0309922
          ],
          [
            -73.0889772,
            7.0306846
          ],
          [
            -73.0887955,
            7.0302942
          ],
          [
            -73.0885223,
            7.0299664
          ],
          [
            -73.0883046,
            7.0295997
          ],
          [
            -73.0880928,
            7.0292287
          ],
          [
            -73.0877772,
            7.0289336
          ],
          [
            -73.0875142,
            7.0285973
          ],
          [
            -73.0873327,
            7.0282068
          ],
          [
            -73.0868087,
            7.0281146
          ],
          [
            -73.086444,
            7.0278865
          ],
          [
            -73.0861517,
            7.0275723
          ],
          [
            -73.0859002,
            7.0272231
          ],
          [
            -73.085602,
            7.0269153
          ],
          [
            -73.085194,
            7.026814
          ],
          [
            -73.0847666,
            7.0268607
          ],
          [
            -73.084392,
            7.0266757
          ],
          [
            -73.0840677,
            7.0263943
          ],
          [
            -73.0837033,
            7.0261658
          ],
          [
            -73.0833175,
            7.0259755
          ],
          [
            -73.0829149,
            7.025824
          ],
          [
            -73.0824999,
            7.0257103
          ],
          [
            -73.0813913,
            7.0258654
          ],
          [
            -73.0805726,
            7.0266118
          ],
          [
            -73.0787751,
            7.0272842
          ],
          [
            -73.0780731,
            7.0278738
          ],
          [
            -73.0772536,
            7.0284247
          ],
          [
            -73.0763589,
            7.0297189
          ],
          [
            -73.0753482,
            7.0313264
          ],
          [
            -73.0755868,
            7.0322248
          ],
          [
            -73.0759817,
            7.0330443
          ],
          [
            -73.076262,
            7.0334316
          ],
          [
            -73.076562,
            7.0337391
          ],
          [
            -73.0767675,
            7.0341176
          ],
          [
            -73.0768486,
            7.0345387
          ],
          [
            -73.0768363,
            7.0349685
          ],
          [
            -73.0765932,
            7.0353009
          ],
          [
            -73.0764839,
            7.0356919
          ],
          [
            -73.0761807,
            7.0359968
          ],
          [
            -73.0758766,
            7.036301
          ],
          [
            -73.0755718,
            7.0366047
          ],
          [
            -73.0752664,
            7.036908
          ],
          [
            -73.0749607,
            7.0372111
          ],
          [
            -73.074349,
            7.0378169
          ],
          [
            -73.0740433,
            7.03812
          ],
          [
            -73.0735012,
            7.0386589
          ],
          [
            -73.0734114,
            7.0386101
          ],
          [
            -73.0731704,
            7.0383101
          ],
          [
            -73.0728413,
            7.0380328
          ],
          [
            -73.0725026,
            7.0377674
          ],
          [
            -73.0721712,
            7.037493
          ],
          [
            -73.0711239,
            7.0377163
          ],
          [
            -73.0707033,
            7.0378069
          ],
          [
            -73.0698629,
            7.037993
          ],
          [
            -73.0694426,
            7.0380855
          ],
          [
            -73.0690208,
            7.0381722
          ],
          [
            -73.0685969,
            7.0382513
          ],
          [
            -73.0681811,
            7.0383584
          ],
          [
            -73.0677767,
            7.0385058
          ],
          [
            -73.067377,
            7.0386702
          ],
          [
            -73.0669763,
            7.0388298
          ],
          [
            -73.0665687,
            7.0389628
          ],
          [
            -73.0661503,
            7.0390544
          ],
          [
            -73.0657244,
            7.0391164
          ],
          [
            -73.0652952,
            7.039166
          ],
          [
            -73.0648672,
            7.0392201
          ],
          [
            -73.064438,
            7.0392481
          ],
          [
            -73.0640078,
            7.0392659
          ],
          [
            -73.0635783,
            7.0392918
          ],
          [
            -73.0631475,
            7.0393263
          ],
          [
            -73.0627119,
            7.0393564
          ],
          [
            -73.0622819,
            7.0394054
          ],
          [
            -73.0618685,
            7.0394986
          ],
          [
            -73.0614843,
            7.0396784
          ],
          [
            -73.0611301,
            7.0399364
          ],
          [
            -73.0607969,
            7.040213
          ],
          [
            -73.0604775,
            7.0405024
          ],
          [
            -73.0601729,
            7.0408088
          ],
          [
            -73.059886,
            7.041129
          ],
          [
            -73.0596474,
            7.04149
          ],
          [
            -73.05942,
            7.0418586
          ],
          [
            -73.059123,
            7.0421588
          ],
          [
            -73.0587618,
            7.042395
          ],
          [
            -73.0583947,
            7.042627
          ],
          [
            -73.0580647,
            7.0429111
          ],
          [
            -73.0577305,
            7.0431825
          ],
          [
            -73.0573415,
            7.043346
          ],
          [
            -73.0569244,
            7.0434545
          ],
          [
            -73.0564976,
            7.0435416
          ],
          [
            -73.0560756,
            7.043633
          ],
          [
            -73.0556541,
            7.0437194
          ],
          [
            -73.0552314,
            7.0438007
          ],
          [
            -73.0548089,
            7.0438829
          ],
          [
            -73.0544445,
            7.0440589
          ],
          [
            -73.0540713,
            7.0442041
          ],
          [
            -73.0536122,
            7.0444215
          ],
          [
            -73.0529102,
            7.0449989
          ],
          [
            -73.0521069,
            7.0454188
          ],
          [
            -73.0519065,
            7.0456207
          ],
          [
            -73.0515628,
            7.0459238
          ],
          [
            -73.0514627,
            7.0460535
          ],
          [
            -73.0512917,
            7.0463989
          ],
          [
            -73.0508907,
            7.046774
          ],
          [
            -73.0504751,
            7.0470774
          ],
          [
            -73.0501309,
            7.0472799
          ],
          [
            -73.0497151,
            7.0475402
          ],
          [
            -73.0491269,
            7.0478155
          ],
          [
            -73.0490981,
            7.0478156
          ],
          [
            -73.0487276,
            7.0478817
          ],
          [
            -73.04754,
            7.0480118
          ],
          [
            -73.046834,
            7.0481315
          ],
          [
            -73.0462047,
            7.0481194
          ],
          [
            -73.0455693,
            7.0479813
          ],
          [
            -73.0452029,
            7.0480156
          ],
          [
            -73.0450655,
            7.0479483
          ],
          [
            -73.0446839,
            7.0477622
          ],
          [
            -73.0444223,
            7.0476329
          ],
          [
            -73.0440236,
            7.0472284
          ],
          [
            -73.0437065,
            7.04698
          ],
          [
            -73.0431401,
            7.0469161
          ],
          [
            -73.0427411,
            7.0468899
          ],
          [
            -73.0424022,
            7.0471867
          ],
          [
            -73.0421573,
            7.0474514
          ],
          [
            -73.0416963,
            7.0479938
          ],
          [
            -73.0413683,
            7.0483832
          ],
          [
            -73.0411022,
            7.0486987
          ],
          [
            -73.0407307,
            7.0492539
          ],
          [
            -73.0404756,
            7.0496426
          ],
          [
            -73.0399339,
            7.0503019
          ],
          [
            -73.0392506,
            7.0509069
          ],
          [
            -73.0390689,
            7.0510349
          ],
          [
            -73.0386116,
            7.0513534
          ],
          [
            -73.0382944,
            7.051574
          ],
          [
            -73.0375901,
            7.0520175
          ],
          [
            -73.0368192,
            7.0523813
          ],
          [
            -73.0364798,
            7.0524801
          ],
          [
            -73.0360035,
            7.0524611
          ],
          [
            -73.0356938,
            7.0524298
          ],
          [
            -73.035461,
            7.0521489
          ],
          [
            -73.0348721,
            7.0516926
          ],
          [
            -73.0344736,
            7.0514539
          ],
          [
            -73.0340897,
            7.0512779
          ],
          [
            -73.0338476,
            7.0511698
          ],
          [
            -73.033435,
            7.0511335
          ],
          [
            -73.0335538,
            7.0520428
          ],
          [
            -73.0336084,
            7.0524274
          ],
          [
            -73.0335466,
            7.053671
          ],
          [
            -73.0334039,
            7.0545251
          ],
          [
            -73.0330448,
            7.0553938
          ],
          [
            -73.0325983,
            7.0560255
          ],
          [
            -73.0320503,
            7.0567954
          ],
          [
            -73.0315741,
            7.0573132
          ],
          [
            -73.0310345,
            7.0576287
          ],
          [
            -73.0296225,
            7.0577584
          ],
          [
            -73.0292162,
            7.0578347
          ],
          [
            -73.0291591,
            7.0579171
          ],
          [
            -73.0291529,
            7.0582663
          ],
          [
            -73.0292469,
            7.0585455
          ],
          [
            -73.0294874,
            7.058837
          ],
          [
            -73.0300013,
            7.0591391
          ],
          [
            -73.0306248,
            7.0594177
          ],
          [
            -73.031115,
            7.0596357
          ],
          [
            -73.0315676,
            7.0599071
          ],
          [
            -73.0318826,
            7.0603308
          ],
          [
            -73.0320532,
            7.0607102
          ],
          [
            -73.032166,
            7.0613668
          ],
          [
            -73.0322072,
            7.0620838
          ],
          [
            -73.0317561,
            7.0630767
          ],
          [
            -73.0310919,
            7.063756
          ],
          [
            -73.0305193,
            7.0643355
          ],
          [
            -73.0299991,
            7.064996
          ],
          [
            -73.0298835,
            7.0654155
          ],
          [
            -73.0298242,
            7.0662801
          ],
          [
            -73.0298012,
            7.0673362
          ],
          [
            -73.0295241,
            7.0684205
          ],
          [
            -73.0294621,
            7.0689759
          ],
          [
            -73.0289243,
            7.0705337
          ],
          [
            -73.0286982,
            7.0714684
          ],
          [
            -73.0285654,
            7.0720538
          ],
          [
            -73.0285423,
            7.0730293
          ],
          [
            -73.0286186,
            7.074061
          ],
          [
            -73.0287015,
            7.0755994
          ],
          [
            -73.0289247,
            7.0766468
          ],
          [
            -73.0288778,
            7.0783904
          ],
          [
            -73.0286333,
            7.0792962
          ],
          [
            -73.0280005,
            7.0800973
          ],
          [
            -73.0273886,
            7.0808901
          ],
          [
            -73.0269409,
            7.0818674
          ],
          [
            -73.0264297,
            7.0831503
          ],
          [
            -73.0261674,
            7.084413
          ],
          [
            -73.0259345,
            7.0859739
          ],
          [
            -73.0260623,
            7.0876328
          ],
          [
            -73.026191,
            7.0887192
          ],
          [
            -73.0264214,
            7.0899207
          ],
          [
            -73.0267856,
            7.0906954
          ],
          [
            -73.0267998,
            7.0908043
          ],
          [
            -73.0264122,
            7.092953
          ],
          [
            -73.0262794,
            7.0939749
          ],
          [
            -73.0257206,
            7.0952604
          ],
          [
            -73.0250088,
            7.096272
          ],
          [
            -73.0241665,
            7.0975398
          ],
          [
            -73.0237349,
            7.098073
          ],
          [
            -73.0233743,
            7.0983395
          ],
          [
            -73.0230328,
            7.0983865
          ],
          [
            -73.0226738,
            7.0983212
          ],
          [
            -73.0217725,
            7.0980565
          ],
          [
            -73.0207835,
            7.0977657
          ],
          [
            -73.0201143,
            7.0976531
          ],
          [
            -73.019541,
            7.0976508
          ],
          [
            -73.0189026,
            7.0979237
          ],
          [
            -73.0185034,
            7.0982972
          ],
          [
            -73.0180202,
            7.0991357
          ],
          [
            -73.0166334,
            7.100771
          ],
          [
            -73.0155424,
            7.1016715
          ],
          [
            -73.0139555,
            7.1024147
          ],
          [
            -73.0128177,
            7.102786
          ],
          [
            -73.0114244,
            7.1030135
          ],
          [
            -73.0101902,
            7.1029187
          ],
          [
            -73.0098961,
            7.1028019
          ],
          [
            -73.0098798,
            7.102802
          ],
          [
            -73.0095873,
            7.1026412
          ],
          [
            -73.0090511,
            7.1024005
          ],
          [
            -73.0089209,
            7.1022876
          ],
          [
            -73.0083037,
            7.1020472
          ],
          [
            -73.0081251,
            7.1019831
          ],
          [
            -73.0078652,
            7.1018708
          ],
          [
            -73.0073619,
            7.1017272
          ],
          [
            -73.0072644,
            7.1016952
          ],
          [
            -73.0066474,
            7.1015033
          ],
          [
            -73.0063714,
            7.1014235
          ],
          [
            -73.0060307,
            7.1013763
          ],
          [
            -73.0053009,
            7.1013632
          ],
          [
            -73.0042629,
            7.1013189
          ],
          [
            -73.0035167,
            7.1012572
          ],
          [
            -73.0033223,
            7.1013066
          ],
          [
            -73.0029988,
            7.1014861
          ],
          [
            -73.0025623,
            7.1018119
          ],
          [
            -73.0025543,
            7.1018692
          ],
        ] as [number, number][],
        color: "orange",
      }
    ];

    veredas.forEach((vereda) => {
      const correctedCoordinates = vereda.coordinates.map(([lat, lng]: [number, number]) => [lng, lat] as LatLngExpression);
      polygon(correctedCoordinates, { color: vereda.color }).addTo(this.map!).bindPopup(vereda.name);
    });
  }
}
